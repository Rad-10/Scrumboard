{"version":3,"file":"Calendar.js","sourceRoot":"","sources":["../../../../src/components/DateTime/Picker/Calendar.tsx"],"names":[],"mappings":"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","sourcesContent":["import {\n  useMemo,\n  FunctionComponent,\n  KeyboardEvent,\n  useState,\n  forwardRef,\n  PropsWithoutRef,\n  Ref,\n  useEffect,\n  useCallback\n} from 'react';\n\nimport Text from '../../Text';\nimport { CALENDAR_TYPES } from '../Input/local';\nimport {\n  getCalendarTypeFromLocale,\n  getDateOfISOWeek,\n  getWeek,\n  parseToDate,\n  toUTCDateString\n} from '../Input/utils';\nimport { useConfiguration, useConsolidatedRef, useFocusWithin, useI18n } from '../../../hooks';\nimport { ForwardProps } from '../../../types';\nimport { FormControlProps } from '../../FormControl';\nimport { cap } from '../../../utils';\n\nimport { getDaysOfMonth, getLocalizedDays, getWeeksOfMonth } from './utils';\nimport {\n  StyledColumnLabel,\n  ScreenReaderOnly,\n  StyledPick,\n  StyledDay,\n  StyledCalendar,\n  StyledWeekGrid,\n  StyledWeekLabel,\n  StyledWeekNumber\n} from './Calendar.styles';\n\nexport interface CalendarProps {\n  /**\n   * Sets DOM id for the control and associates label element via 'for' attribute.\n   * If an id is not pass, a random id will be generated for any render.\n   */\n  id?: FormControlProps['id'];\n  /**\n   * Defines default date that will be selected initially when the Calendar is visible.\n   */\n  selected?: Date;\n  /**\n   * Defines currently visible month.\n   * @default new Date()\n   */\n  current?: Date;\n  /** Defines dates range with start date and end date that can be set by the user. */\n  selectedRange?: { startDate: Date | undefined; endDate: Date | undefined };\n  /** Defines if days should be highlighted for range selection  */\n  showHighlight?: boolean;\n  /** Defines if week numbers should be displayed in calendar  */\n  showWeekNumber?: boolean;\n  /**\n   * The mode of the calendar that will be rendered, ie. whether single date or week are selectable.\n   * @default \"date\"\n   */\n  mode?: 'date' | 'week';\n  /** Callback fired when new day is selected. */\n  onSelect?: (date: Date) => void;\n  /** Callback fired when user focuses new day. */\n  onFocus?: (date: Date) => void;\n  /** Sets the type of calendar to be used. This will be determined by locale if no value is provided. */\n  calendarType?: string;\n  /** Defines minimum available value that can be selected by the user. */\n  min?: string | number | Date;\n  /** Defines maximum available value that can be selected by the user. */\n  max?: string | number | Date;\n  /** Set the calendar to disabled state, ie. non-interactive. */\n  disabled?: boolean;\n}\n\nconst ariaOpts = { day: 'numeric', month: 'long', year: 'numeric' } as const;\n\nconst Calendar: FunctionComponent<CalendarProps & ForwardProps> = forwardRef(\n  (\n    {\n      selected,\n      current = selected ? new Date(selected.getTime()) : new Date(),\n      selectedRange,\n      showHighlight,\n      mode = 'date',\n      showWeekNumber,\n      calendarType: calendar = CALENDAR_TYPES.ISO_8601,\n      onSelect,\n      onFocus,\n      disabled,\n      min: minProp,\n      max: maxProp\n    }: PropsWithoutRef<CalendarProps>,\n    ref: Ref<HTMLTableElement>\n  ) => {\n    const { locale } = useConfiguration();\n    const min = minProp ? parseToDate(minProp) : -Infinity;\n    const max = maxProp ? parseToDate(maxProp) : Infinity;\n\n    const showWeekLabel = mode === 'week' ? false : showWeekNumber;\n    const [focusedDay, setFocusedDay] = useState(current);\n    useEffect(() => {\n      setFocusedDay(current);\n    }, [current.getUTCFullYear(), current.getUTCMonth()]);\n\n    const calendarType = useMemo(\n      () => calendar ?? getCalendarTypeFromLocale(locale),\n      [locale, calendar]\n    );\n\n    const [highlightBoundary, setHighlightBoundary] = useState<Date>();\n\n    const onKeyDown = useCallback(\n      (e: KeyboardEvent<HTMLElement>) => {\n        if (\n          (mode === 'date'\n            ? ['ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight']\n            : ['ArrowUp', 'ArrowDown']\n          ).includes(e.key)\n        ) {\n          e.preventDefault();\n          const newFocused = new Date(focusedDay);\n          switch (e.key) {\n            case 'ArrowUp':\n              newFocused.setUTCDate(focusedDay.getUTCDate() - 7);\n              break;\n            case 'ArrowDown':\n              newFocused.setUTCDate(focusedDay.getUTCDate() + 7);\n              break;\n            case 'ArrowRight':\n              newFocused.setUTCDate(focusedDay.getUTCDate() + 1);\n              break;\n            case 'ArrowLeft':\n              newFocused.setUTCDate(focusedDay.getUTCDate() - 1);\n              break;\n            default:\n          }\n          if (newFocused < min || newFocused > max) return;\n          setFocusedDay(newFocused);\n          onFocus?.(newFocused);\n          setHighlightBoundary(newFocused);\n        }\n        if (e.key === 'Enter') {\n          e.preventDefault();\n          onSelect?.(focusedDay);\n        }\n      },\n      [mode, focusedDay, onFocus, onSelect]\n    );\n\n    const containerRef = useConsolidatedRef<HTMLTableElement>(ref);\n    const hasFocus = useFocusWithin([containerRef]);\n\n    const today = toUTCDateString(new Date());\n\n    const isDisabled = (day: Date) => {\n      return min > day.getTime() || day.getTime() > max;\n    };\n\n    const isSelected = (day: Date) => {\n      return [\n        selected && toUTCDateString(selected),\n        selectedRange?.startDate && toUTCDateString(selectedRange?.startDate),\n        selectedRange?.endDate && toUTCDateString(selectedRange?.endDate)\n      ].includes(toUTCDateString(day));\n    };\n\n    const isWeekSelected = (day: Date) => {\n      return (\n        selected &&\n        toUTCDateString(day) ===\n          toUTCDateString(getDateOfISOWeek(getWeek(selected, calendarType), selected.getFullYear()))\n      );\n    };\n\n    const isFocused = (day: Date) => {\n      return toUTCDateString(day) === toUTCDateString(focusedDay);\n    };\n\n    const isWeekFocused = (day: Date) => {\n      return (\n        toUTCDateString(day) ===\n        toUTCDateString(\n          getDateOfISOWeek(getWeek(focusedDay, calendarType), focusedDay.getFullYear())\n        )\n      );\n    };\n\n    const isInRange = (day: Date) => {\n      return (\n        selectedRange &&\n        selectedRange.startDate &&\n        selectedRange.endDate &&\n        day >= selectedRange.startDate &&\n        day <= selectedRange.endDate\n      );\n    };\n\n    const isHighlighted = (day: Date) => {\n      if (!selectedRange || !showHighlight || !highlightBoundary) return false;\n      const betweenHighlightAndBoundary = (rangeBoundaryType: 'startDate' | 'endDate') => {\n        const rangeBoundary = selectedRange[rangeBoundaryType];\n        if (!rangeBoundary) return false;\n        return !!(\n          rangeBoundary &&\n          ((day >= rangeBoundary && day <= highlightBoundary) ||\n            (day <= rangeBoundary && day >= highlightBoundary))\n        );\n      };\n      return betweenHighlightAndBoundary('startDate') || betweenHighlightAndBoundary('endDate');\n    };\n\n    useEffect(() => {\n      if (hasFocus)\n        containerRef.current?.querySelector<HTMLButtonElement>('button[tabindex=\"0\"]')?.focus();\n    }, [hasFocus, focusedDay]);\n\n    const days = getDaysOfMonth(current, calendarType ?? CALENDAR_TYPES.ISO_8601).map(day => {\n      return (\n        <StyledDay\n          key={day.getTime()}\n          tabIndex={isFocused(day) ? 0 : -1}\n          disabled={disabled || mode === 'week' || isDisabled(day)}\n          current={toUTCDateString(day) === today}\n          highlighted={isInRange(day) || isHighlighted(day)}\n          aria-selected={isSelected(day) || undefined}\n          aria-current={isSelected(day) ? 'date' : undefined}\n          dayInNexOrPrevMonth={day.getUTCMonth() !== current.getUTCMonth()}\n          aria-label={toUTCDateString(day, Intl.DateTimeFormat(locale, ariaOpts))}\n          onMouseOver={showHighlight ? () => setHighlightBoundary(day) : undefined}\n          onMouseOut={showHighlight ? () => setHighlightBoundary(undefined) : undefined}\n          onClick={() => {\n            setFocusedDay(day);\n            onFocus?.(day);\n            onSelect?.(day);\n          }}\n        >\n          {day.getUTCDate()}\n        </StyledDay>\n      );\n    });\n\n    const names = useMemo(() => getLocalizedDays(calendarType, locale), [locale, calendarType]);\n\n    const t = useI18n();\n\n    const displayNames = new Intl.DisplayNames(locale, {\n      style: 'long',\n      type: 'dateTimeField'\n    }) as Intl.DateTimeDisplayNames;\n    const displayNamesShort = new Intl.DisplayNames(locale, {\n      style: 'short',\n      type: 'dateTimeField'\n    }) as Intl.DateTimeDisplayNames;\n\n    const weeks = getWeeksOfMonth(current, calendarType).map(weekNo => {\n      return (\n        <>\n          <Text as={StyledWeekNumber} key={weekNo} aria-hidden='true'>\n            {weekNo.toString()}\n          </Text>\n          <ScreenReaderOnly>\n            {`${displayNames.of('weekOfYear')} ${weekNo.toString()} ${current\n              .getUTCFullYear()\n              .toString()}`}\n          </ScreenReaderOnly>\n        </>\n      );\n    });\n\n    const weeksButtons = getWeeksOfMonth(current, calendarType).map(weekNo => {\n      const dateOfISOWeek = getDateOfISOWeek(weekNo, current.getUTCFullYear());\n      const lastDayOfWeek = new Date(dateOfISOWeek);\n      lastDayOfWeek.setDate(dateOfISOWeek.getDate() + 6);\n      return (\n        <StyledPick\n          key={weekNo}\n          tabIndex={isWeekFocused(dateOfISOWeek) ? 0 : -1}\n          disabled={disabled || mode === 'date' || isDisabled(dateOfISOWeek)}\n          aria-selected={isWeekSelected(dateOfISOWeek) || undefined}\n          aria-label={`${displayNames.of('weekOfYear')} ${weekNo.toString()} ${toUTCDateString(\n            dateOfISOWeek,\n            Intl.DateTimeFormat(locale, ariaOpts)\n          )} - ${toUTCDateString(lastDayOfWeek, Intl.DateTimeFormat(locale, ariaOpts))}`}\n          aria-current={isWeekFocused(dateOfISOWeek) ? 'date' : undefined}\n          onMouseDown={() => {\n            setFocusedDay(dateOfISOWeek);\n            onFocus?.(dateOfISOWeek);\n            onSelect?.(dateOfISOWeek);\n          }}\n        >\n          {`${cap(displayNames.of('weekOfYear'))} `}\n          {weekNo.toString()}\n        </StyledPick>\n      );\n    });\n\n    const weekLabel =\n      mode === 'date' ? (\n        <>\n          <Text\n            as={StyledWeekLabel}\n            forwardedAs='abbr'\n            title={cap(displayNames.of('weekOfYear'))}\n            aria-hidden='true'\n          >\n            {cap(displayNamesShort.of('weekOfYear'))}\n          </Text>\n          <ScreenReaderOnly>{displayNames.of('weekOfYear')}</ScreenReaderOnly>\n        </>\n      ) : (\n        <Text as={StyledWeekLabel}>{cap(displayNames.of('weekOfYear'))}</Text>\n      );\n\n    const headerLabels = names.map(([name, abbr]) => (\n      <th role='columnheader' key={name}>\n        <Text as={StyledColumnLabel} forwardedAs='abbr' key={name} title={name} aria-hidden='true'>\n          {abbr}\n        </Text>\n        <ScreenReaderOnly>{name}</ScreenReaderOnly>\n      </th>\n    ));\n\n    const splitToWeeks = (resultArray: JSX.Element[][], item: JSX.Element, index: number) => {\n      const chunkIndex = Math.floor(index / 7);\n\n      if (!resultArray[chunkIndex]) {\n        resultArray[chunkIndex] = [] as JSX.Element[];\n      }\n\n      resultArray[chunkIndex].push(item);\n      return resultArray;\n    };\n\n    const cells = days.reduce(splitToWeeks, []).map((week, index) => {\n      const rowHeader = mode === 'week' ? weeksButtons[index] : weeks[index];\n      return (\n        // eslint-disable-next-line react/no-array-index-key\n        <tr key={`week-${index}`}>\n          {showWeekLabel && <th scope='row'>{rowHeader}</th>}\n          {week.map((day, dayIndex) => {\n            // eslint-disable-next-line react/no-array-index-key\n            return <td key={`day-${dayIndex}`}>{day}</td>;\n          })}\n        </tr>\n      );\n    });\n\n    const weeksCells = weeksButtons.map((week, index) => {\n      return (\n        // eslint-disable-next-line react/no-array-index-key\n        <tr key={`week-${index}`}>\n          <td>{week}</td>\n        </tr>\n      );\n    });\n\n    const weeksGrid = (\n      <StyledWeekGrid role='grid' onKeyDown={onKeyDown} ref={containerRef}>\n        <thead>\n          <tr>\n            <th>{weekLabel}</th>\n          </tr>\n        </thead>\n        <tbody>{weeksCells}</tbody>\n      </StyledWeekGrid>\n    );\n\n    return (\n      <>\n        {mode === 'week' && weeksGrid}\n        <StyledCalendar\n          ref={mode === 'date' ? containerRef : undefined}\n          aria-label={current.toLocaleString(locale, {\n            month: 'long',\n            year: 'numeric',\n            timeZone: 'UTC'\n          })}\n          onKeyDown={onKeyDown}\n          aria-hidden={mode === 'week' ? true : undefined}\n          role='grid'\n        >\n          <thead>\n            <tr>\n              {showWeekLabel && <th>{weekLabel}</th>}\n              {headerLabels}\n            </tr>\n          </thead>\n          <tbody>{cells}</tbody>\n        </StyledCalendar>\n        <ScreenReaderOnly aria-live='polite' role='alert'>\n          {t('calendar_assist')}\n        </ScreenReaderOnly>\n      </>\n    );\n  }\n);\n\nexport default Calendar;\n"]}