{"version":3,"file":"StandardTree.js","sourceRoot":"","sources":["../../../src/components/Tree/StandardTree.tsx"],"names":[],"mappings":";AAAA,OAAO,EACL,UAAU,EACV,aAAa,EACb,OAAO,EACP,UAAU,EACV,WAAW,EACX,QAAQ,EAET,MAAM,OAAO,CAAC;AAGf,OAAO,QAAQ,MAAM,aAAa,CAAC;AACnC,OAAO,EAAE,YAAY,EAAE,MAAM,aAAa,CAAC;AAC3C,OAAO,IAAI,MAAM,SAAS,CAAC;AAC3B,OAAO,MAAM,MAAM,WAAW,CAAC;AAC/B,OAAO,OAAO,MAAM,YAAY,CAAC;AAEjC,OAAO,EAAE,GAAG,EAAE,MAAM,aAAa,CAAC;AAElC,OAAO,EACL,wBAAwB,EACxB,gBAAgB,EAChB,6BAA6B,EAC7B,sBAAsB,EACtB,kBAAkB,EAClB,qBAAqB,EACrB,sBAAsB,EACtB,iBAAiB,EACjB,kBAAkB,EAClB,cAAc,EACd,cAAc,EACf,MAAM,uBAAuB,CAAC;AAQ/B,OAAO,OAAO,MAAM,WAAW,CAAC;AAEhC,MAAM,mBAAmB,GAAG,aAAa,CAYvC;IACA,aAAa,EAAE,SAAS;IACxB,KAAK,EAAE,KAAK;IACZ,WAAW,EAAE,GAAG,EAAE,GAAE,CAAC;IACrB,YAAY,EAAE,GAAG,EAAE,GAAE,CAAC;IACtB,WAAW,EAAE,SAAS;IACtB,UAAU,EAAE,SAAS;IACrB,aAAa,EAAE,SAAS;IACxB,mBAAmB,EAAE,GAAG,EAAE,GAAE,CAAC;CAC9B,CAAC,CAAC;AAEH,MAAM,YAAY,GAAgD,CAAC,EACjE,EAAE,EACF,KAAK,EACL,IAAI,EACJ,KAAK,EACL,gBAAgB,EAChB,KAAK,EACL,QAAQ,GAAG,KAAK,EAChB,OAAO,GAAG,KAAK,EACf,OAAO,EACP,OAAO,EACP,OAAO,EACR,EAAE,EAAE;IACH,MAAM,EACJ,aAAa,EACb,WAAW,EACX,YAAY,EACZ,KAAK,EACL,aAAa,EACb,mBAAmB,EACnB,WAAW,EACX,UAAU,EACX,GAAG,UAAU,CAAC,mBAAmB,CAAC,CAAC;IACpC,MAAM,OAAO,GAAG,aAAa,KAAK,EAAE,CAAC;IACrC,MAAM,SAAS,GAAG,aAAa,KAAK,EAAE,CAAC;IACvC,MAAM,SAAS,GAAG,WAAW,KAAK,EAAE,CAAC;IACrC,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,YAAY,EAAE,CAAC;IAEtC,MAAM,QAAQ,GAAG,OAAO,CAAC,GAAG,EAAE;QAC5B,IAAI,KAAK,GAAG,CAAC,CAAC,CAAC;QACf,IAAI,aAAa,EAAE;YACjB,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;aAAM,IAAI,aAAa,EAAE;YACxB,KAAK,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC1B;aAAM;YACL,KAAK,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SAC5B;QACD,OAAO,KAAK,CAAC;IACf,CAAC,EAAE,CAAC,aAAa,EAAE,aAAa,EAAE,OAAO,EAAE,SAAS,CAAC,CAAC,CAAC;IAEvD,MAAM,iBAAiB,GAAG,WAAW,CACnC,CAAC,CAAuD,EAAE,EAAE;QAC1D,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;QACrB,mBAAmB,CAAC,EAAE,CAAC,CAAC;IAC1B,CAAC,EACD,CAAC,EAAE,EAAE,WAAW,EAAE,mBAAmB,CAAC,CACvC,CAAC;IAEF,MAAM,SAAS,GAAG,WAAW,CAC3B,CAAC,CAA6B,EAAE,EAAE;QAChC,IAAI,CAAC,SAAS,EAAE,WAAW,EAAE,OAAO,EAAE,MAAM,EAAE,KAAK,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC;YAAE,CAAC,CAAC,cAAc,EAAE,CAAC;QACzF,QAAQ,CAAC,CAAC,GAAG,EAAE;YACb,KAAK,SAAS;gBACZ,mBAAmB,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC;gBAC9B,MAAM;YACR,KAAK,WAAW;gBACd,mBAAmB,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;gBAChC,MAAM;YACR,KAAK,QAAQ,GAAG,CAAC,GAAG,CAAC,EAAE;gBACrB,IAAI,KAAK,EAAE;oBACT,IAAI,QAAQ,EAAE;wBACZ,mBAAmB,CAAC,EAAE,EAAE,OAAO,CAAC,CAAC;qBAClC;yBAAM;wBACL,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;qBACpB;iBACF;gBACD,MAAM;YACR,KAAK,QAAQ,GAAG,CAAC,KAAK,CAAC,EAAE;gBACvB,IAAI,QAAQ,EAAE;oBACZ,YAAY,EAAE,CAAC,EAAE,CAAC,CAAC;iBACpB;qBAAM;oBACL,mBAAmB,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;iBACjC;gBACD,MAAM;YACR,KAAK,OAAO;gBACV,IAAI,OAAO,EAAE;oBACX,OAAO,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;iBAChB;qBAAM;oBACL,iBAAiB,CAAC,CAAC,CAAC,CAAC;iBACtB;gBACD,MAAM;YACR,KAAK,MAAM;gBACT,IAAI,WAAW;oBAAE,mBAAmB,CAAC,WAAW,CAAC,CAAC;gBAClD,MAAM;YACR,KAAK,KAAK;gBACR,IAAI,UAAU;oBAAE,mBAAmB,CAAC,UAAU,CAAC,CAAC;gBAChD,MAAM;YACR,QAAQ;SACT;IACH,CAAC,EACD,CAAC,EAAE,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,mBAAmB,CAAC,CAClF,CAAC;IAEF,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,EAAE;QAC9B,2FAA2F;QAC3F,OAAO,OAAO,CAAC,CAAC,CAAC,CACf,KAAC,iBAAiB,cAChB,KAAC,OAAO,IACN,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE;oBAC1B,OAAO;wBACL,GAAG,MAAM;wBACT,OAAO,EAAE,CACP,QAAsB,EACtB,CAAuE,EACvE,EAAE;4BACF,CAAC,CAAC,eAAe,EAAE,CAAC;4BACpB,MAAM,EAAE,OAAO,EAAE,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC;wBACjC,CAAC;qBACF,CAAC;gBACJ,CAAC,CAAC,EACF,MAAM,EAAE,CAAC,EACT,eAAe,EAAE;oBACf,OAAO,EAAE,CAAC,CAAa,EAAE,EAAE,CAAC,CAAC,CAAC,eAAe,EAAE;oBAC/C,SAAS,EAAE,CAAC,CAAgB,EAAE,EAAE;wBAC9B,CAAC,CAAC,eAAe,EAAE,CAAC;wBACpB,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,GAAG,CAAC,EAAE;4BAC5C,CAAC,CAAC,cAAc,EAAE,CAAC;yBACpB;oBACH,CAAC;iBACF,GACD,GACgB,CACrB,CAAC,CAAC,CAAC,IAAI,CAAC;IACX,CAAC,EAAE,CAAC,OAAO,CAAC,CAAC,CAAC;IAEd,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,EAAE;QAChC,MAAM,QAAQ,GAAG;QACf,oFAAoF;QACpF,MAAC,IAAI,IAAC,SAAS,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAE,kBAAkB,aACxE,IAAI,IAAI,KAAC,cAAc,IAAC,IAAI,EAAE,IAAI,GAAI,EACvC,KAAC,cAAc,cAAE,KAAK,GAAkB,IACnC,CACR,CAAC;QAEF,OAAO,CAAC,KAAK,IAAI,CAAC,OAAO,IAAI,WAAW,CAAC,CAAC,CAAC,CAAC,CAC1C,MAAC,IAAI,IACH,SAAS,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,EAC/D,EAAE,EAAE,qBAAqB,EACzB,IAAI,EAAC,UAAU,kBACD,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,EAC1C,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAE,CAAC,CAA0B,EAAE,EAAE;gBACtC,OAAO,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gBACjB,WAAW,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;gBACrB,mBAAmB,CAAC,EAAE,CAAC,CAAC;YAC1B,CAAC,EACD,SAAS,EAAE,SAAS,EACpB,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,UAA0B,EAAE,EAAE,CAAC,UAAU,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,SAAS,aAE/E,QAAQ,EACR,UAAU,IACN,CACR,CAAC,CAAC,CAAC,CACF,QAAQ,CACT,CAAC;IACJ,CAAC,EAAE;QACD,EAAE;QACF,KAAK;QACL,IAAI;QACJ,KAAK;QACL,OAAO;QACP,OAAO;QACP,WAAW;QACX,OAAO;QACP,SAAS;QACT,QAAQ;QACR,mBAAmB;QACnB,SAAS;KACV,CAAC,CAAC;IAEH,OAAO,CACL,KAAC,sBAAsB,IACrB,EAAE,EAAE,EAAE,EACN,KAAK,EACH,EAAE,SAAS,EAAE,KAAK,EAAE,sBAAsB,EAAE,MAAM,CAAC,gBAAgB,CAAC,EAAmB,eAE9E,OAAO,YAEjB,KAAK,CAAC,CAAC,CAAC,CACP,8BACE,MAAC,IAAI,IACH,SAAS,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,OAAO,EAAE,SAAS,EAAE,GAAG,EAAE,CAAC,EAAE,EAC/D,EAAE,EAAE,wBAAwB,EAC5B,IAAI,EAAC,UAAU,kBACD,OAAO,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,SAAS,EAC1C,QAAQ,EAAE,QAAQ,EAClB,OAAO,EAAC,MAAM,EACd,OAAO,EAAE,iBAAiB,mBACX,QAAQ,CAAC,CAAC,CAAC,MAAM,CAAC,CAAC,CAAC,OAAO,gBAC9B,KAAK,EACjB,SAAS,EAAE,SAAS,EACpB,GAAG,EAAE,SAAS,CAAC,CAAC,CAAC,CAAC,YAA4B,EAAE,EAAE,CAAC,YAAY,EAAE,KAAK,EAAE,CAAC,CAAC,CAAC,SAAS,aAEpF,MAAC,IAAI,IAAC,SAAS,EAAE,EAAE,UAAU,EAAE,QAAQ,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE,EAAE,EAAC,MAAM,aAC5D,KAAC,MAAM,IACL,OAAO,EAAC,QAAQ,EAChB,IAAI,QACJ,OAAO,QACP,OAAO,EAAE,CAAC,CAA0B,EAAE,EAAE;wCACtC,IAAI,YAAY,EAAE;4CAChB,CAAC,CAAC,eAAe,EAAE,CAAC;4CACpB,YAAY,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC;4CACpB,mBAAmB,CAAC,EAAE,CAAC,CAAC;yCACzB;oCACH,CAAC,YAED,KAAC,gBAAgB,IAAC,IAAI,EAAC,aAAa,GAAG,GAChC,EACR,YAAY,IACR,EACN,UAAU,IACN,EACP,MAAC,6BAA6B,IAAC,KAAK,EAAE,KAAK,aACxC,OAAO,EACP,OAAO,IAAI,KAAC,QAAQ,IAAC,OAAO,EAAC,MAAM,EAAC,SAAS,EAAC,QAAQ,GAAG,IAC5B,IAC/B,CACJ,CAAC,CAAC,CAAC,CACF,KAAC,sBAAsB,cAAE,YAAY,GAA0B,CAChE,GACsB,CAC1B,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,qBAAqB,GAAwD,UAAU,CAC3F,CACE,EACE,KAAK,EACL,aAAa,EACb,WAAW,EACX,YAAY,EACZ,KAAK,GAAG,KAAK,EACb,GAAG,SAAS,EACuB,EACrC,GAA6B,EAC7B,EAAE;IACF,MAAM,CAAC,aAAa,EAAE,iBAAiB,CAAC,GAAG,QAAQ,EAAsB,CAAC;IAE1E,MAAM,UAAU,GAAG,OAAO,CAAC,GAAG,EAAE;QAC9B,OAAO,OAAO,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC;IACvE,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,MAAM,mBAAmB,GAAoD,WAAW,CACtF,CAAC,EAAE,EAAE,IAAI,EAAE,EAAE;QACX,QAAQ,IAAI,EAAE;YACZ,KAAK,IAAI,CAAC,CAAC;gBACT,MAAM,YAAY,GAAG,OAAO,CAAC,eAAe,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBACxD,IAAI,YAAY;oBAAE,iBAAiB,CAAC,YAAY,CAAC,EAAE,CAAC,CAAC;gBACrD,MAAM;aACP;YACD,KAAK,MAAM,CAAC,CAAC;gBACX,MAAM,QAAQ,GAAG,OAAO,CAAC,WAAW,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBAChD,IAAI,QAAQ;oBAAE,iBAAiB,CAAC,QAAQ,CAAC,EAAE,CAAC,CAAC;gBAC7C,MAAM;aACP;YACD,KAAK,MAAM,CAAC,CAAC;gBACX,MAAM,UAAU,GAAG,OAAO,CAAC,aAAa,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBACpD,IAAI,UAAU;oBAAE,iBAAiB,CAAC,UAAU,CAAC,EAAE,CAAC,CAAC;gBACjD,MAAM;aACP;YACD,KAAK,OAAO,CAAC,CAAC;gBACZ,MAAM,SAAS,GAAG,OAAO,CAAC,iBAAiB,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;gBACvD,IAAI,SAAS;oBAAE,iBAAiB,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;gBAC/C,MAAM;aACP;YACD;gBACE,iBAAiB,CAAC,EAAE,CAAC,CAAC;SACzB;IACH,CAAC,EACD,CAAC,KAAK,CAAC,CACR,CAAC;IAEF,OAAO,CACL,KAAC,mBAAmB,CAAC,QAAQ,IAC3B,KAAK,EAAE,OAAO,CACZ,GAAG,EAAE,CAAC,CAAC;YACL,aAAa;YACb,aAAa;YACb,UAAU;YACV,WAAW,EAAE,KAAK,CAAC,CAAC,CAAC,CAAC,EAAE;YACxB,mBAAmB;YACnB,WAAW;YACX,YAAY;YACZ,KAAK;SACN,CAAC,EACF,CAAC,aAAa,EAAE,WAAW,EAAE,KAAK,EAAE,aAAa,EAAE,UAAU,EAAE,YAAY,CAAC,CAC7E,YAGD,KAAC,kBAAkB,OAAK,SAAS,EAAE,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,KAAK,EAAE,YAAY,EAAE,YAAY,GAAI,GAC5D,CAChC,CAAC;AACJ,CAAC,CACF,CAAC;AAEF,MAAM,YAAY,GAAwD,UAAU,CAClF,CAAC,KAAyC,EAAE,GAA6B,EAAE,EAAE;IAC3E,OAAO,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,KAAC,qBAAqB,OAAK,KAAK,EAAE,GAAG,EAAE,GAAG,GAAI,CAAC,CAAC,CAAC,IAAI,CAAC;AACxF,CAAC,CACF,CAAC;AAEF,eAAe,YAAY,CAAC","sourcesContent":["import {\n  forwardRef,\n  createContext,\n  useMemo,\n  useContext,\n  useCallback,\n  useState,\n  KeyboardEvent\n} from 'react';\nimport type { FunctionComponent, PropsWithoutRef, CSSProperties, MouseEvent } from 'react';\n\nimport Progress from '../Progress';\nimport { useDirection } from '../../hooks';\nimport Flex from '../Flex';\nimport Button from '../Button';\nimport Actions from '../Actions';\nimport type { Action, ForwardProps } from '../../types';\nimport { cap } from '../../utils';\n\nimport {\n  StyledStandardTreeParent,\n  StyledToggleIcon,\n  StyledStandardTreeItemSubTree,\n  StyledStandardTreeLeaf,\n  StyledStandardTree,\n  StyledNodeInteraction,\n  StyledStandardTreeNode,\n  StyledNodeActions,\n  StyledLabelContent,\n  StyledNodeIcon,\n  StyledNodeText\n} from './StandardTree.styles';\nimport type { TreeProps } from './Tree';\nimport type {\n  StandardTreeContextProps,\n  StandardTreeNode,\n  StandardTreeProps,\n  StandardTreePropsWithDefaults\n} from './StandardTree.types';\nimport helpers from './helpers';\n\nconst StandardTreeContext = createContext<\n  Pick<\n    StandardTreePropsWithDefaults,\n    | 'currentNodeId'\n    | 'lined'\n    | 'onNodeClick'\n    | 'onNodeToggle'\n    | 'firstNodeId'\n    | 'lastNodeId'\n    | 'focusedNodeId'\n    | 'changeFocusedNodeId'\n  >\n>({\n  currentNodeId: undefined,\n  lined: false,\n  onNodeClick: () => {},\n  onNodeToggle: () => {},\n  firstNodeId: undefined,\n  lastNodeId: undefined,\n  focusedNodeId: undefined,\n  changeFocusedNodeId: () => {}\n});\n\nconst NodeRenderer: TreeProps<StandardTreeNode>['nodeRenderer'] = ({\n  id,\n  label,\n  icon,\n  depth,\n  hasParentSibling,\n  nodes,\n  expanded = false,\n  loading = false,\n  subTree,\n  actions,\n  onClick\n}) => {\n  const {\n    currentNodeId,\n    onNodeClick,\n    onNodeToggle,\n    lined,\n    focusedNodeId,\n    changeFocusedNodeId,\n    firstNodeId,\n    lastNodeId\n  } = useContext(StandardTreeContext);\n  const current = currentNodeId === id;\n  const focusedEl = focusedNodeId === id;\n  const firstNode = firstNodeId === id;\n  const { start, end } = useDirection();\n\n  const tabIndex = useMemo(() => {\n    let index = -1;\n    if (focusedNodeId) {\n      index = focusedEl ? 0 : -1;\n    } else if (currentNodeId) {\n      index = current ? 0 : -1;\n    } else {\n      index = firstNode ? 0 : -1;\n    }\n    return index;\n  }, [focusedNodeId, currentNodeId, current, focusedEl]);\n\n  const handleToggleClick = useCallback(\n    (e: MouseEvent<HTMLElement> | KeyboardEvent<HTMLElement>) => {\n      onNodeClick?.(id, e);\n      changeFocusedNodeId(id);\n    },\n    [id, onNodeClick, changeFocusedNodeId]\n  );\n\n  const onKeyDown = useCallback(\n    (e: KeyboardEvent<HTMLElement>) => {\n      if (['ArrowUp', 'ArrowDown', 'Enter', 'Home', 'End'].includes(e.key)) e.preventDefault();\n      switch (e.key) {\n        case 'ArrowUp':\n          changeFocusedNodeId(id, 'up');\n          break;\n        case 'ArrowDown':\n          changeFocusedNodeId(id, 'down');\n          break;\n        case `Arrow${cap(end)}`:\n          if (nodes) {\n            if (expanded) {\n              changeFocusedNodeId(id, 'right');\n            } else {\n              onNodeToggle?.(id);\n            }\n          }\n          break;\n        case `Arrow${cap(start)}`:\n          if (expanded) {\n            onNodeToggle?.(id);\n          } else {\n            changeFocusedNodeId(id, 'left');\n          }\n          break;\n        case 'Enter':\n          if (onClick) {\n            onClick(id, e);\n          } else {\n            handleToggleClick(e);\n          }\n          break;\n        case 'Home':\n          if (firstNodeId) changeFocusedNodeId(firstNodeId);\n          break;\n        case 'End':\n          if (lastNodeId) changeFocusedNodeId(lastNodeId);\n          break;\n        default:\n      }\n    },\n    [id, end, nodes, expanded, actions, firstNodeId, lastNodeId, changeFocusedNodeId]\n  );\n\n  const actionsJSX = useMemo(() => {\n    // since Actions may render a frag of buttons and we need a wrapper for flex space-between.\n    return actions ? (\n      <StyledNodeActions>\n        <Actions\n          items={actions.map(action => {\n            return {\n              ...action,\n              onClick: (\n                actionId: Action['id'],\n                e: MouseEvent<HTMLButtonElement | HTMLAnchorElement | HTMLInputElement>\n              ) => {\n                e.stopPropagation();\n                action?.onClick?.(actionId, e);\n              }\n            };\n          })}\n          menuAt={3}\n          menuButtonProps={{\n            onClick: (e: MouseEvent) => e.stopPropagation(),\n            onKeyDown: (e: KeyboardEvent) => {\n              e.stopPropagation();\n              if (['ArrowUp', 'ArrowDown'].includes(e.key)) {\n                e.preventDefault();\n              }\n            }\n          }}\n        />\n      </StyledNodeActions>\n    ) : null;\n  }, [actions]);\n\n  const labelContent = useMemo(() => {\n    const internal = (\n      // Wrapping in a div for handling of flex space-between when there are node actions.\n      <Flex container={{ alignItems: 'center', gap: 0.5 }} as={StyledLabelContent}>\n        {icon && <StyledNodeIcon name={icon} />}\n        <StyledNodeText>{label}</StyledNodeText>\n      </Flex>\n    );\n\n    return !nodes && (onClick ?? onNodeClick) ? (\n      <Flex\n        container={{ alignItems: 'center', justify: 'between', gap: 2 }}\n        as={StyledNodeInteraction}\n        role='treeitem'\n        aria-current={current ? 'true' : undefined}\n        tabIndex={tabIndex}\n        onClick={(e: MouseEvent<HTMLElement>) => {\n          onClick?.(id, e);\n          onNodeClick?.(id, e);\n          changeFocusedNodeId(id);\n        }}\n        onKeyDown={onKeyDown}\n        ref={focusedEl ? (focusedRef: HTMLDivElement) => focusedRef?.focus() : undefined}\n      >\n        {internal}\n        {actionsJSX}\n      </Flex>\n    ) : (\n      internal\n    );\n  }, [\n    id,\n    label,\n    icon,\n    nodes,\n    actions,\n    onClick,\n    onNodeClick,\n    current,\n    focusedEl,\n    tabIndex,\n    changeFocusedNodeId,\n    onKeyDown\n  ]);\n\n  return (\n    <StyledStandardTreeNode\n      id={id}\n      style={\n        { '--depth': depth, '--has-parent-sibling': Number(hasParentSibling) } as CSSProperties\n      }\n      aria-busy={loading}\n    >\n      {nodes ? (\n        <>\n          <Flex\n            container={{ alignItems: 'center', justify: 'between', gap: 2 }}\n            as={StyledStandardTreeParent}\n            role='treeitem'\n            aria-current={current ? 'true' : undefined}\n            tabIndex={tabIndex}\n            variant='text'\n            onClick={handleToggleClick}\n            aria-expanded={expanded ? 'true' : 'false'}\n            aria-label={label}\n            onKeyDown={onKeyDown}\n            ref={focusedEl ? (focusedElRef: HTMLDivElement) => focusedElRef?.focus() : undefined}\n          >\n            <Flex container={{ alignItems: 'center', gap: 0.5 }} as='span'>\n              <Button\n                variant='simple'\n                icon\n                compact\n                onClick={(e: MouseEvent<HTMLElement>) => {\n                  if (onNodeToggle) {\n                    e.stopPropagation();\n                    onNodeToggle(id, e);\n                    changeFocusedNodeId(id);\n                  }\n                }}\n              >\n                <StyledToggleIcon name='caret-right' />\n              </Button>\n              {labelContent}\n            </Flex>\n            {actionsJSX}\n          </Flex>\n          <StyledStandardTreeItemSubTree lined={lined}>\n            {subTree}\n            {loading && <Progress variant='ring' placement='inline' />}\n          </StyledStandardTreeItemSubTree>\n        </>\n      ) : (\n        <StyledStandardTreeLeaf>{labelContent}</StyledStandardTreeLeaf>\n      )}\n    </StyledStandardTreeNode>\n  );\n};\n\nconst StandardTreeWithNodes: FunctionComponent<StandardTreeProps & ForwardProps> = forwardRef(\n  (\n    {\n      nodes,\n      currentNodeId,\n      onNodeClick,\n      onNodeToggle,\n      lined = false,\n      ...restProps\n    }: PropsWithoutRef<StandardTreeProps>,\n    ref: StandardTreeProps['ref']\n  ) => {\n    const [focusedNodeId, setFocusedNodedId] = useState<string | undefined>();\n\n    const lastNodeId = useMemo(() => {\n      return helpers.getDeepestNode(nodes, nodes[nodes.length - 1].id)?.id;\n    }, [nodes]);\n\n    const changeFocusedNodeId: StandardTreeContextProps['changeFocusedNodeId'] = useCallback(\n      (id, type) => {\n        switch (type) {\n          case 'up': {\n            const previousNode = helpers.getPreviousNode(nodes, id);\n            if (previousNode) setFocusedNodedId(previousNode.id);\n            break;\n          }\n          case 'down': {\n            const nextNode = helpers.getNextNode(nodes, id);\n            if (nextNode) setFocusedNodedId(nextNode.id);\n            break;\n          }\n          case 'left': {\n            const parentNode = helpers.getParentNode(nodes, id);\n            if (parentNode) setFocusedNodedId(parentNode.id);\n            break;\n          }\n          case 'right': {\n            const childNode = helpers.getFirstChildNode(nodes, id);\n            if (childNode) setFocusedNodedId(childNode.id);\n            break;\n          }\n          default:\n            setFocusedNodedId(id);\n        }\n      },\n      [nodes]\n    );\n\n    return (\n      <StandardTreeContext.Provider\n        value={useMemo(\n          () => ({\n            currentNodeId,\n            focusedNodeId,\n            lastNodeId,\n            firstNodeId: nodes[0].id,\n            changeFocusedNodeId,\n            onNodeClick,\n            onNodeToggle,\n            lined\n          }),\n          [currentNodeId, onNodeClick, lined, focusedNodeId, lastNodeId, onNodeToggle]\n        )}\n      >\n        {/* FIXME: Types are having issues when styled(Tree) is typeof Tree. */}\n        <StyledStandardTree {...restProps} ref={ref} nodes={nodes} nodeRenderer={NodeRenderer} />\n      </StandardTreeContext.Provider>\n    );\n  }\n);\n\nconst StandardTree: FunctionComponent<StandardTreeProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<StandardTreeProps>, ref: StandardTreeProps['ref']) => {\n    return props.nodes.length > 0 ? <StandardTreeWithNodes {...props} ref={ref} /> : null;\n  }\n);\n\nexport default StandardTree;\n"]}