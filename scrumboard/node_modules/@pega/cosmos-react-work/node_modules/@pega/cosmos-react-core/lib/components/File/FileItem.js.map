{"version":3,"file":"FileItem.js","sourceRoot":"","sources":["../../../src/components/File/FileItem.tsx"],"names":[],"mappings":";AAAA,OAAO,EAAE,UAAU,EAA4B,WAAW,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AACpF,OAAO,MAAM,EAAE,EAAE,GAAG,EAAE,MAAM,mBAAmB,CAAC;AAGhD,OAAO,EAAE,gBAAgB,EAAE,MAAM,aAAa,CAAC;AAC/C,OAAO,MAAM,EAAE,EAAE,YAAY,EAAE,MAAM,WAAW,CAAC;AACjD,OAAO,IAAI,MAAM,SAAS,CAAC;AAC3B,OAAO,EAAE,OAAO,EAAE,MAAM,aAAa,CAAC;AAEtC,OAAO,EAAE,mBAAmB,EAAE,mBAAmB,EAAE,MAAM,SAAS,CAAC;AACnE,OAAO,UAAU,EAAE,EAAmB,gBAAgB,EAAE,MAAM,cAAc,CAAC;AAiB7E,MAAM,cAAc,GAAG,MAAM,CAAC,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,EAAE;IACpE,OAAO,GAAG,CAAA;gCACoB,IAAI,CAAC,eAAe,CAAC;;QAE7C,gBAAgB;;;;;gBAKR,UAAU,CAAC,KAAK,CAAC,MAAM;eACxB,UAAU,CAAC,KAAK,CAAC,MAAM;;;QAG9B,gBAAgB,MAAM,YAAY;;gCAEV,IAAI,CAAC,OAAO,CAAC,aAAa,CAAC;0BACjC,IAAI,CAAC,OAAO,CAAC,oBAAoB,CAAC;;mBAEzC,IAAI,CAAC,OAAO;;;;;;;;;;GAU5B,CAAC;AACJ,CAAC,CAAC,CAAC;AAEH,cAAc,CAAC,YAAY,GAAG,gBAAgB,CAAC;AAE/C,MAAM,QAAQ,GAAqC,UAAU,CAC3D,CAAC,KAAqC,EAAE,GAAyB,EAAE,EAAE;IACnE,MAAM,EAAE,IAAI,EAAE,GAAG,EAAE,SAAS,EAAE,SAAS,EAAE,UAAU,EAAE,GAAG,SAAS,EAAE,GAAG,KAAK,CAAC;IAE5E,MAAM,CAAC,cAAc,EAAE,iBAAiB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC5D,MAAM,CAAC,GAAG,OAAO,EAAE,CAAC;IAEpB,MAAM,eAAe,GAAG,WAAW,CAAC,GAAG,EAAE;QACvC,UAAU,EAAE,CAAC,GAAG,CAAC,CAAC;IACpB,CAAC,EAAE,CAAC,GAAG,EAAE,UAAU,CAAC,CAAC,CAAC;IAEtB,MAAM,IAAI,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC;IACtC,MAAM,IAAI,GAAG,IAAI,IAAI,GAAG,CAAC;IAEzB,OAAO,CACL,MAAC,IAAI,IAAC,EAAE,EAAE,cAAc,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,UAAU,EAAE,EAAE,GAAG,EAAE,GAAG,aACjE,KAAC,UAAU,IACT,IAAI,EAAE,mBAAmB,CAAC,IAAI,IAAI,EAAE,CAAC,EACrC,SAAS,EAAE,cAAc,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,SAAS,EACjD,gBAAgB,EAAE,GAAG,EAAE;oBACrB,iBAAiB,CAAC,IAAI,CAAC,CAAC;gBAC1B,CAAC,EACD,QAAQ,EAAE,CAAC,SAAS,EACpB,OAAO,EAAE,GAAG,EAAE,CAAC,SAAS,EAAE,CAAC,GAAG,CAAC,gBACnB,GAAG,CAAC,CAAC,SAAS,CAAC,KAAK,IAAI,EAAE,GACtC,EACF,KAAC,MAAM,OACD,SAAS,EACb,OAAO,EAAC,MAAM,EACd,QAAQ,EAAE,CAAC,UAAU,EACrB,OAAO,EAAE,eAAe,gBACZ,GAAG,CAAC,CAAC,UAAU,CAAC,KAAK,IAAI,EAAE,YAEtC,IAAI,GACE,IACJ,CACR,CAAC;AACJ,CAAC,CACF,CAAC;AAEF,eAAe,QAAQ,CAAC","sourcesContent":["import { forwardRef, PropsWithoutRef, FC, Ref, useCallback, useState } from 'react';\nimport styled, { css } from 'styled-components';\n\nimport { ForwardProps, BaseProps } from '../../types';\nimport { defaultThemeProp } from '../../theme';\nimport Button, { StyledButton } from '../Button';\nimport Grid from '../Grid';\nimport { useI18n } from '../../hooks';\n\nimport { getKindFromMimeType, getMimeTypeFromFile } from './utils';\nimport FileVisual, { FileVisualProps, StyledFileVisual } from './FileVisual';\n\nexport interface FileItemProps extends BaseProps {\n  /** Name of the file. */\n  name: string;\n  /** Url of the file. */\n  url: string;\n  /** A string to be used as an image src for a attachment thumbnail. Falls back to a provided icon or the default attachment icon. */\n  thumbnail?: FileVisualProps['thumbnail'];\n  /** When passed, it will make the icon/thumbnail region actionable. Passes file url as the parameter. */\n  onPreview?: (url: FileItemProps['url']) => void;\n  /** When passed, it will make the name region actionable. Passes file url as the parameter. */\n  onDownload?: (url: FileItemProps['url']) => void;\n  /** Ref for the wrapping element. */\n  ref?: Ref<HTMLButtonElement>;\n}\n\nconst StyledFileItem = styled.div(({ theme: { base, components } }) => {\n  return css`\n    border-radius: calc(0.5 * ${base['border-radius']});\n\n    > ${StyledFileVisual} {\n      border-start-start-radius: inherit;\n      border-end-start-radius: inherit;\n      border-start-end-radius: 0;\n      border-end-end-radius: 0;\n      height: ${components.input.height};\n      width: ${components.input.height};\n    }\n\n    > ${StyledFileVisual} + ${StyledButton} {\n      margin-inline-start: 0;\n      border: 0.0625rem solid ${base.palette['border-line']};\n      background-color: ${base.palette['primary-background']};\n      opacity: 1;\n      padding: 0 ${base.spacing};\n      border-inline-start: 0;\n      border-start-start-radius: 0;\n      border-end-start-radius: 0;\n      border-start-end-radius: inherit;\n      border-end-end-radius: inherit;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n    }\n  `;\n});\n\nStyledFileItem.defaultProps = defaultThemeProp;\n\nconst FileItem: FC<FileItemProps & ForwardProps> = forwardRef(\n  (props: PropsWithoutRef<FileItemProps>, ref: FileItemProps['ref']) => {\n    const { name, url, thumbnail, onPreview, onDownload, ...restProps } = props;\n\n    const [thumbnailError, setThumbnailError] = useState(false);\n    const t = useI18n();\n\n    const onDownloadClick = useCallback(() => {\n      onDownload?.(url);\n    }, [url, onDownload]);\n\n    const type = getMimeTypeFromFile(url);\n    const text = name || url;\n\n    return (\n      <Grid as={StyledFileItem} container={{ cols: 'auto 1fr' }} ref={ref}>\n        <FileVisual\n          type={getKindFromMimeType(type ?? '')}\n          thumbnail={thumbnailError ? undefined : thumbnail}\n          onThumbnailError={() => {\n            setThumbnailError(true);\n          }}\n          disabled={!onPreview}\n          onClick={() => onPreview?.(url)}\n          aria-label={`${t('preview')}: ${text}`}\n        />\n        <Button\n          {...restProps}\n          variant='text'\n          disabled={!onDownload}\n          onClick={onDownloadClick}\n          aria-label={`${t('download')}: ${text}`}\n        >\n          {text}\n        </Button>\n      </Grid>\n    );\n  }\n);\n\nexport default FileItem;\n"]}