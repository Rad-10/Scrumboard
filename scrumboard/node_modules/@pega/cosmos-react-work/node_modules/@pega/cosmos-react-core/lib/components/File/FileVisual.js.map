{"version":3,"file":"FileVisual.js","sourceRoot":"","sources":["../../../src/components/File/FileVisual.tsx"],"names":[],"mappings":"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","sourcesContent":["import { forwardRef, PropsWithoutRef, FC, Ref, CSSProperties, SyntheticEvent } from 'react';\nimport styled, { css, DefaultTheme } from 'styled-components';\n\nimport Icon from '../Icon';\nimport { ForwardProps, BaseProps, OmitStrict } from '../../types';\nimport { defaultThemeProp } from '../../theme';\nimport Flex from '../Flex';\nimport Image, { StyledImage } from '../Image';\nimport { useTheme } from '../../hooks';\n\nimport { AttachmentType } from './utils';\n\nexport interface FileVisualProps extends BaseProps {\n  /** Attachment/File type, it has an impact on background color and icon rendered. */\n  type: AttachmentType;\n  /** A string to be used as an image src for a attachment thumbnail. */\n  thumbnail?: string;\n  /** Called when a thumbnail encounters an error while loading. */\n  onThumbnailError?: (e: SyntheticEvent<HTMLImageElement>) => void;\n  /** Reference to a button element. */\n  ref?: Ref<HTMLDivElement>;\n}\ntype ThemeColor = keyof OmitStrict<DefaultTheme['base']['colors'], 'white' | 'black'>;\ntype ThemeColorVariant = 'extra-light' | 'light' | 'medium' | 'dark' | 'extra-dark';\n\ntype BackgroundColor = `${ThemeColor}.${ThemeColorVariant}`;\n\nconst mapping: Record<\n  AttachmentType,\n  { backgroundColor: BackgroundColor } & (\n    | { iconName: string; text?: never }\n    | { iconName?: never; text: string }\n  )\n> = {\n  generic: {\n    iconName: 'paper-clip',\n    backgroundColor: 'slate.dark'\n  },\n  video: {\n    iconName: 'play-solid',\n    backgroundColor: 'slate.dark'\n  },\n  audio: {\n    iconName: 'speaker-on-solid',\n    backgroundColor: 'slate.dark'\n  },\n  document: {\n    iconName: 'filetype-text',\n    backgroundColor: 'blue.medium'\n  },\n  message: {\n    iconName: 'mail-solid',\n    backgroundColor: 'blue.dark'\n  },\n  pdf: {\n    text: 'PDF',\n    backgroundColor: 'red.medium'\n  },\n  spreadsheet: {\n    iconName: 'grid-solid',\n    backgroundColor: 'green.medium'\n  },\n  presentation: {\n    iconName: 'slideshow-solid',\n    backgroundColor: 'orange.medium'\n  },\n  link: {\n    iconName: 'chain',\n    backgroundColor: 'purple.dark'\n  },\n  archive: {\n    iconName: 'archive-solid',\n    backgroundColor: 'slate.dark'\n  },\n  database: {\n    iconName: 'disc-stack-solid',\n    backgroundColor: 'slate.dark'\n  },\n  image: {\n    iconName: 'picture-solid',\n    backgroundColor: 'slate.dark'\n  },\n  text: {\n    iconName: 'filetype-text',\n    backgroundColor: 'slate.dark'\n  }\n} as const;\n\nexport const StyledFileVisual = styled.div``;\n\nexport const StyledIconFrame = styled(StyledFileVisual)(({ theme }) => {\n  return css`\n    background-color: var(--bg);\n    color: ${theme.base.palette.light};\n    height: ${theme.components.input.height};\n    width: ${theme.components.input.height};\n    border-radius: calc(0.25 * ${theme.base['border-radius']});\n    font-size: calc(0.7 * ${theme.base['font-size']});\n    font-weight: ${theme.base['font-weight']['semi-bold']};\n    user-select: none;\n    -webkit-user-select: none;\n  `;\n});\n\nStyledIconFrame.defaultProps = defaultThemeProp;\n\nconst StyledThumbnailFrame = styled(StyledFileVisual)(({ theme }) => {\n  return css`\n    background-color: ${theme.base.palette['app-background']};\n    height: 100%;\n    width: 100%;\n\n    ${StyledImage} {\n      margin: auto;\n      height: unset;\n      width: unset;\n      max-height: 100%;\n      max-width: 100%;\n    }\n  `;\n});\n\nStyledThumbnailFrame.defaultProps = defaultThemeProp;\n\nconst FileVisual: FC<FileVisualProps & ForwardProps> = forwardRef(\n  (\n    { type, thumbnail, onThumbnailError, ...restProps }: PropsWithoutRef<FileVisualProps>,\n    ref: FileVisualProps['ref']\n  ) => {\n    const visualConfig = mapping[type];\n\n    const [color, lightness] = visualConfig.backgroundColor.split('.', 2) as [\n      ThemeColor,\n      ThemeColorVariant\n    ];\n\n    const {\n      base: {\n        colors: {\n          [color]: { [lightness]: backgroundColor }\n        }\n      }\n    } = useTheme();\n\n    return thumbnail ? (\n      <Flex {...restProps} as={StyledThumbnailFrame} container>\n        <Image src={thumbnail} onError={onThumbnailError} alt='' />\n      </Flex>\n    ) : (\n      <Flex\n        {...restProps}\n        as={StyledIconFrame}\n        ref={ref}\n        container={{ justify: 'center', alignItems: 'center' }}\n        style={{ '--bg': backgroundColor } as CSSProperties}\n      >\n        {visualConfig.iconName ? <Icon name={visualConfig.iconName} /> : visualConfig.text}\n      </Flex>\n    );\n  }\n);\n\nexport default FileVisual;\n"]}