{"version":3,"file":"useActiveDescendant.js","sourceRoot":"","sources":["../../src/hooks/useActiveDescendant.ts"],"names":[],"mappings":"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","sourcesContent":["import { useEffect, useState, DependencyList, useCallback, useRef } from 'react';\n\nimport { createUID, getActiveElement } from '../utils';\n\nimport useDirection from './useDirection';\n\nexport interface UseActiveDescendantConfig {\n  /** DOM element which controls and has active descendants */\n  focusEl: HTMLElement | null;\n  /** Root scope for descendant options */\n  scope: HTMLElement | null;\n  /** Custom selector for specific descendant scope in root descendant scope */\n  scopeSelector?: string;\n  /** Custom selector for descendant options */\n  selector?: string;\n  /** Orientation of descendant navigation\n   * @default 'vertical'\n   */\n  orientation?: 'horizontal' | 'vertical';\n  /** One-time override for the focused descendant, triggers re-evaluation.\n   * Include `clearFocusDescendantEl` for cleanup.\n   */\n  focusDescendantEl?: HTMLElement | null;\n  /** Callback to clear focusDescendantEl after use. */\n  clearFocusDescendant?: () => void;\n  /** One-time override for focused element on NEXT re-evaluation of active descendants.\n   * Include `clearFocusReturn` for cleanup.\n   */\n  focusReturnEl?: HTMLElement | null;\n  /** Callback to clear focusReturnEl after use. */\n  clearFocusReturn?: () => void;\n  /**\n   * Descendant ID used for continuous override of current active descendant,\n   * used for external focus control / keyDown bindings (see RTE).\n   * NOTE: setting currentDescendantId once effectively disables the keybindings of this hook.\n   * If you only need to set the current element once, use focusReturnEl & clearFocusReturn.\n   * @deprecated\n   */\n  currentDescendantId?: string;\n  /** Explicit onClick handler called on keydown 'enter' event */\n  onClick?: (currentDescendantEl: HTMLElement) => void;\n  /** Prevent scrolling to the active descendant on the initial render.\n   * Include `preventInitialScroll` for cleanup.\n   */\n  preventInitialScroll?: boolean;\n  /** Callback to clear preventInitialScroll after use. */\n  clearPreventScroll?: () => void;\n  /** Boolean to prevent descendant evaluation.\n   * @default false\n   */\n  pauseDescendantEvaluation?: boolean;\n}\n\ntype CurrentDescendant = HTMLElement | undefined;\ntype Descendants = HTMLElement[] | null;\n\nconst useActiveDescendant = (\n  {\n    focusEl,\n    scope,\n    scopeSelector,\n    selector,\n    orientation = 'vertical',\n    focusDescendantEl,\n    clearFocusDescendant,\n    focusReturnEl,\n    clearFocusReturn,\n    currentDescendantId,\n    onClick,\n    preventInitialScroll,\n    pauseDescendantEvaluation = false,\n    clearPreventScroll\n  }: UseActiveDescendantConfig,\n  dependencyArray: DependencyList = []\n): {\n  activeDescendant: CurrentDescendant;\n  descendants: Descendants;\n} => {\n  const [resetId, setResetId] = useState(0);\n  const previousActiveId = useRef('');\n  const paused = useRef(pauseDescendantEvaluation);\n  const [focusDescendantElIndex, setFocusDescendantElIndex] = useState<number | null>(null);\n  const [currentIndex, setCurrentIndex] = useState<number | null>(null);\n  const [descendants, setDescendants] = useState<Descendants>();\n  const { rtl } = useDirection();\n\n  const clearDescendants = useCallback(() => {\n    descendants?.forEach(node => {\n      node.setAttribute('data-current', 'false');\n    });\n  }, [descendants]);\n\n  const clearThenSetDescendants = useCallback(\n    (setVal: NodeListOf<Element> | null) => {\n      clearDescendants();\n      setDescendants(\n        setVal\n          ? Array.from(setVal).filter((item): item is HTMLElement => item instanceof HTMLElement)\n          : null\n      );\n    },\n    [descendants]\n  );\n\n  const setIdsAndOwns = useCallback(\n    ({ clear }: { clear: boolean } = { clear: false }) => {\n      const ownedIds: string[] = [];\n\n      if (descendants && descendants.length) {\n        descendants.forEach(node => {\n          node.id = node.id || createUID();\n          ownedIds.push(node.id);\n        });\n      }\n\n      if (clear) {\n        const currentOwnedIds = focusEl?.getAttribute('aria-owns')?.split(' ');\n        const clearedIds = currentOwnedIds?.filter(id => !ownedIds.includes(id));\n        focusEl?.setAttribute('aria-owns', clearedIds?.join(' ') || '');\n      } else {\n        focusEl?.setAttribute('aria-owns', ownedIds.join(' '));\n      }\n    },\n    [focusEl, descendants]\n  );\n\n  const updateDescendants = useCallback(() => {\n    if (pauseDescendantEvaluation) return;\n\n    let hasScope = scope;\n\n    if (hasScope && hasScope instanceof HTMLElement) {\n      if (scopeSelector) {\n        hasScope = hasScope.querySelector(scopeSelector);\n      }\n\n      if (!hasScope) {\n        clearThenSetDescendants(null);\n        return;\n      }\n\n      if (selector) {\n        const setVal = hasScope.querySelectorAll(selector);\n        clearThenSetDescendants(setVal);\n      } else {\n        const setVal = hasScope.querySelectorAll(\n          'a, button, input, textarea, select, details, [tabindex]:not([tabindex=\"-1\"])'\n        );\n        clearThenSetDescendants(setVal);\n      }\n    } else {\n      clearThenSetDescendants(null);\n    }\n  }, [scope, scopeSelector, selector, pauseDescendantEvaluation]);\n\n  // Update paused ref\n  useEffect(() => {\n    paused.current = pauseDescendantEvaluation;\n  }, [pauseDescendantEvaluation]);\n\n  // Toggle active scope data attr.\n  useEffect(() => {\n    if (!scope || !focusEl) return;\n\n    scope.setAttribute('data-active-scope', getActiveElement() === focusEl ? 'true' : 'false');\n\n    const onFocus = () => {\n      scope.setAttribute('data-active-scope', 'true');\n    };\n    const onBlur = () => {\n      scope.setAttribute('data-active-scope', 'false');\n    };\n\n    focusEl.addEventListener('focus', onFocus);\n    focusEl.addEventListener('blur', onBlur);\n\n    return () => {\n      focusEl.removeEventListener('focus', onFocus);\n      focusEl.removeEventListener('blur', onBlur);\n    };\n  }, [scope, focusEl]);\n\n  // Update descendants when un-paused\n  useEffect(() => {\n    if (!pauseDescendantEvaluation) {\n      updateDescendants();\n    }\n  }, [pauseDescendantEvaluation]);\n\n  // Update descendants & reset current index when dependencies change\n  useEffect(() => {\n    /**\n     * 0 second timeout added because descendantScope needs to be\n     * up to date before running query after dependencyArray change\n     */\n    const timeoutId = setTimeout(() => {\n      updateDescendants();\n      if (!paused.current) {\n        setCurrentIndex(0);\n      }\n    }, 0);\n\n    return () => clearTimeout(timeoutId);\n  }, [...dependencyArray]);\n\n  // Set IDs and aria-owns\n  useEffect(() => {\n    if (!pauseDescendantEvaluation) {\n      setIdsAndOwns();\n      setResetId(Math.random());\n    } else {\n      clearDescendants();\n      setIdsAndOwns({ clear: true });\n    }\n  }, [pauseDescendantEvaluation, focusEl, descendants]);\n\n  // Bind focus el keyDown\n  useEffect(() => {\n    const nextIndex = () => {\n      // Focus next or first\n      clearFocusReturn?.();\n      clearPreventScroll?.();\n      if (currentIndex !== null && currentIndex + 1 < descendants!.length) {\n        setCurrentIndex(currentIndex + 1);\n      } else {\n        setCurrentIndex(0);\n      }\n    };\n    const prevIndex = () => {\n      // Focus previous or last\n      clearFocusReturn?.();\n      clearPreventScroll?.();\n      if (currentIndex !== null && currentIndex - 1 > -1) {\n        setCurrentIndex(currentIndex - 1);\n      } else {\n        setCurrentIndex(descendants!.length - 1);\n      }\n    };\n\n    const onKeyDown = (e: KeyboardEvent) => {\n      if (descendants?.length) {\n        if (['ArrowDown', 'ArrowUp'].includes(e.key) && orientation === 'vertical') {\n          e.preventDefault();\n        }\n\n        if (['ArrowLeft', 'ArrowRight'].includes(e.key) && orientation === 'horizontal') {\n          e.preventDefault();\n        }\n\n        // 0 second timeout to execute after explicitly defined onKeyDown event handlers.\n        setTimeout(() => {\n          switch (e.key) {\n            case 'ArrowDown':\n              if (orientation === 'vertical') {\n                nextIndex();\n              }\n              break;\n            case 'ArrowUp':\n              if (orientation === 'vertical') {\n                prevIndex();\n              }\n              break;\n            case 'ArrowRight':\n              if (orientation === 'horizontal') {\n                if (rtl) {\n                  prevIndex();\n                } else {\n                  nextIndex();\n                }\n              }\n              break;\n            case 'ArrowLeft':\n              if (orientation === 'horizontal') {\n                if (rtl) {\n                  nextIndex();\n                } else {\n                  prevIndex();\n                }\n              }\n              break;\n            case 'Enter':\n              // Click focused item\n              if (currentIndex !== null) {\n                if (onClick) {\n                  onClick(descendants[currentIndex]);\n                  break;\n                }\n\n                const nodeName = descendants[currentIndex].nodeName.toLowerCase();\n                if (nodeName === 'input' || nodeName === 'button' || nodeName === 'a') {\n                  descendants[currentIndex].click();\n                } else {\n                  descendants[currentIndex]\n                    .querySelector<HTMLButtonElement | HTMLAnchorElement | HTMLInputElement>(\n                      'button, a, input'\n                    )\n                    ?.click();\n                }\n              }\n              break;\n            default:\n              break;\n          }\n        }, 0);\n      }\n    };\n\n    // Do not rebind once / if `currentDescendantId` (deprecated) control is defined\n    if (!pauseDescendantEvaluation && focusEl && descendants?.length && !currentDescendantId) {\n      focusEl.addEventListener('keydown', onKeyDown);\n    }\n\n    return () => {\n      focusEl?.removeEventListener('keydown', onKeyDown);\n    };\n  }, [focusEl, currentIndex, descendants, pauseDescendantEvaluation]);\n\n  // Handle independent control update (deprecated)\n  useEffect(() => {\n    if (!pauseDescendantEvaluation && descendants && currentDescendantId) {\n      descendants.forEach((node, index) => {\n        if (node.id === currentDescendantId) {\n          setCurrentIndex(index);\n        }\n      });\n    }\n  }, [currentDescendantId, descendants, pauseDescendantEvaluation]);\n\n  // Set and scroll to current descendant\n  useEffect(() => {\n    if (paused.current) {\n      return;\n    }\n    const nextIndex = focusDescendantElIndex || currentIndex;\n    const focusReturnId = focusReturnEl?.id;\n    let focusReturnIndex;\n    const focusDescendantElId = focusDescendantEl?.id;\n    let focusDescendantIndex;\n    let foundFocusDescendantEl = false;\n\n    if (descendants && descendants.length) {\n      // clear previous & catch focusReturn / focusDescendantEl index\n      descendants.forEach((node, index) => {\n        if (focusDescendantElIndex === null && node.id === focusDescendantElId) {\n          focusDescendantIndex = index;\n          foundFocusDescendantEl = true;\n          setFocusDescendantElIndex(index);\n        }\n        if (node.id === focusReturnId) {\n          focusReturnIndex = index;\n        }\n        node.setAttribute('data-current', 'false');\n      });\n\n      // early return for focusReturn / focusDescendantEl\n      if (focusReturnIndex && focusReturnIndex !== currentIndex) {\n        setCurrentIndex(focusReturnIndex);\n        clearFocusReturn?.();\n        return;\n      }\n      if (foundFocusDescendantEl && focusDescendantIndex !== undefined) {\n        // hard reset to continue focusDescendantEl process even if it is the active descendant\n        setResetId(Math.random());\n        setCurrentIndex(focusDescendantIndex);\n        return;\n      }\n\n      // set new\n      if (nextIndex !== null && descendants[nextIndex]) {\n        const itemEl = descendants[nextIndex!];\n        itemEl.setAttribute('data-current', 'true');\n        focusEl?.setAttribute('aria-activedescendant', itemEl.id);\n\n        // scroll to element\n        if (itemEl.id !== previousActiveId.current && !preventInitialScroll) {\n          const scrollTo: (this: Element, arg: boolean) => void =\n            Element.prototype.scrollIntoViewIfNeeded ?? Element.prototype.scrollIntoView;\n\n          scrollTo?.call(itemEl, false);\n        }\n\n        // focusDescendantEl cleanup\n        if (focusDescendantElIndex !== null) {\n          setFocusDescendantElIndex(null);\n          clearFocusDescendant?.();\n        }\n\n        previousActiveId.current = itemEl.id;\n      }\n    }\n\n    return () => {\n      focusEl?.removeAttribute('aria-activedescendant');\n    };\n  }, [descendants, currentIndex, focusDescendantEl, focusEl, resetId]);\n\n  return {\n    activeDescendant: currentIndex !== null && descendants ? descendants[currentIndex] : undefined,\n    descendants: descendants || null\n  };\n};\n\nexport const useLazyDescendant = ({\n  loading,\n  descendants,\n  previousActiveDescendant,\n  activeDescendant,\n  focusReturnEl,\n  setFocusReturnEl,\n  scrollEl\n}: {\n  loading: boolean;\n  descendants: Descendants;\n  previousActiveDescendant: CurrentDescendant;\n  activeDescendant: CurrentDescendant;\n  focusReturnEl: UseActiveDescendantConfig['focusReturnEl'];\n  setFocusReturnEl: (el: HTMLElement | null | undefined) => void;\n  scrollEl?: HTMLElement | null;\n}) => {\n  // Bump scroll & set return element when descendant focused in loading state.\n  useEffect(() => {\n    if (loading && descendants && descendants.length && activeDescendant) {\n      const descendantList = [...descendants];\n      const lastItem = descendantList.pop();\n      const lastId = lastItem?.id || undefined;\n      let timeoutId: ReturnType<typeof setTimeout>;\n\n      if (lastId === activeDescendant.id) {\n        if (scrollEl) {\n          scrollEl.scrollTop = scrollEl.scrollHeight - scrollEl.offsetHeight;\n        }\n\n        if (focusReturnEl?.id !== activeDescendant.id) {\n          // Set focus return to AD on 'nextTick', to avoid reset of AD on update\n          timeoutId = setTimeout(() => {\n            setFocusReturnEl(lastItem);\n          }, 0);\n        }\n      }\n      // If not last item\n      else if (focusReturnEl?.id !== activeDescendant.id) {\n        // Set focus return to AD on 'nextTick' to avoid reset of AD on update\n        // Do not D.R.Y to avoid conflicting calls with immediately prior elements.\n        timeoutId = setTimeout(() => {\n          setFocusReturnEl(activeDescendant);\n        }, 0);\n      }\n\n      return () => clearTimeout(timeoutId);\n    }\n  }, [loading, descendants, previousActiveDescendant, activeDescendant, scrollEl, focusReturnEl]);\n};\n\nexport default useActiveDescendant;\n"]}