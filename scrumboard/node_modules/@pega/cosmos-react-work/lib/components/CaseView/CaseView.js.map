{"version":3,"file":"CaseView.js","sourceRoot":"","sources":["../../../src/components/CaseView/CaseView.tsx"],"names":[],"mappings":"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","sourcesContent":["import { FC, useEffect, useMemo, useRef, useLayoutEffect, useState } from 'react';\n\nimport {\n  Button,\n  Flex,\n  Grid,\n  Icon,\n  registerIcon,\n  TabPanel,\n  useBreakpoint,\n  useScrollStick,\n  useElement,\n  ForwardProps,\n  Card,\n  Drawer,\n  useI18n,\n  useDirection,\n  Tabs,\n  TabsProps,\n  useAfterInitialEffect,\n  windowIsAvailable\n} from '@pega/cosmos-react-core';\nimport { ScrollStickOptions } from '@pega/cosmos-react-core/lib/hooks/useScrollStick';\nimport * as moveRightSolidIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/move-right-solid.icon';\nimport * as moveLeftSolidIcon from '@pega/cosmos-react-core/lib/components/Icon/icons/move-left-solid.icon';\n\nimport CaseSummary from './CaseSummary';\nimport UtilitiesSummary from './UtilitiesSummary';\nimport {\n  StyledCaseDrawer,\n  StyledCaseDrawerContent,\n  StyledCaseView,\n  StyledWorkArea,\n  StyledPersistentUtility,\n  StyledSummary,\n  StyledUtilities,\n  StyledUtilToggle\n} from './CaseView.styles';\nimport { CaseViewContextValue, CaseViewProps } from './CaseView.types';\nimport CaseViewContext from './CaseView.context';\n\nregisterIcon(moveRightSolidIcon, moveLeftSolidIcon);\n\nconst CaseView: FC<CaseViewProps & ForwardProps> = ({\n  // Case data mostly visually related to the case header\n  caseId,\n  heading,\n  subheading,\n  caseLink,\n  parentCases,\n  icon,\n  followed,\n  onFollowedChange,\n  onEdit,\n  actions,\n  promotedActions,\n\n  // Summary content and state props\n  summary,\n  summaryExpanded: summaryExpandedProp = true,\n  onToggleSummary,\n\n  // Case tabs\n  tabs: { currentTabId, items: tabItemsProp, onClick: onTabClick },\n\n  // Workarea related content props\n  banners,\n  stages,\n  tasks,\n  tabContent: tabContentProp = [],\n\n  // Utilities content and state props\n  utilities,\n  utilitiesSummaryItems,\n  utilitiesExpanded: utilitiesExpandedProp = true,\n  onToggleUtilities,\n\n  // Etc...\n  persistentUtility,\n  intelligentGuidance,\n  isPreview = false,\n  ...restProps\n}: CaseViewProps) => {\n  // General util hooks\n  const t = useI18n();\n  const direction = useDirection();\n\n  // Element refs\n  const caseViewRef = useRef<HTMLDivElement>(null);\n  const summaryRef = useRef<HTMLDivElement>(null);\n\n  // Tab content\n  const [tabContentEl, setTabContentEl] = useElement<HTMLElement>(null);\n\n  // Breakpoint booleans\n  const mdOrAbove = useBreakpoint('md', { breakpointRef: caseViewRef });\n  const lgOrAbove = useBreakpoint('lg', { breakpointRef: caseViewRef });\n  const xlOrAbove = useBreakpoint('xl', { breakpointRef: caseViewRef });\n\n  // DOM ids\n  const summaryTabId = `summary-${caseId}`;\n  const utilitiesTabId = `utilities-${caseId}`;\n  const persistentUtilityTabId = `persistent-utility-${caseId}`;\n  const summaryId = `summary-${caseId}`;\n  const utilitiesId = `utilities-${caseId}`;\n  const utilitiesDrawerId = `utilities-drawer-${caseId}`;\n\n  // Summary state handling\n  let summaryExpanded = !!summaryExpandedProp;\n  if (persistentUtility) {\n    summaryExpanded = xlOrAbove;\n  }\n\n  // Utilities state handling\n\n  // Used in coordination with a layoutEffect below to determine the utilities state on initial render.\n  // Attempted with a ref but it did not work. Using state and enforcing a render in addition to the change render for lgOrAbove seems to fix...\n  const [obeyUtilitiesExpandedProp, setObeyUtilitiesExpandedProp] = useState(lgOrAbove);\n\n  // Allow the utilitiesExpandedProp to drive the utilities' state after the initial render\n  useLayoutEffect(() => {\n    if (lgOrAbove) setObeyUtilitiesExpandedProp(true);\n  }, [lgOrAbove]);\n\n  // Tracks whether a resize forced the onToggleUtilities to close the utilities when it's a drawer\n  const utilitiesToggledByResize = useRef(false);\n\n  // If the initial render is within the MD size, where the utility drawer renders, it must begin collapsed\n  const utilitiesExpanded = obeyUtilitiesExpandedProp ? utilitiesExpandedProp : false;\n\n  // Handles utilities state based on breakpoint changes.\n  useAfterInitialEffect(() => {\n    // If we change into the MD breakpoint range and the utilities state is expanded call the toggle prop to collapse it with controlled state\n    if (mdOrAbove && !lgOrAbove && utilitiesExpandedProp) {\n      onToggleUtilities?.();\n      utilitiesToggledByResize.current = true;\n    }\n\n    if (lgOrAbove) {\n      if (utilitiesToggledByResize.current && !utilitiesExpandedProp) {\n        onToggleUtilities?.();\n      }\n\n      utilitiesToggledByResize.current = false;\n    }\n    // Purposely not listing utilitiesExpanded as a dependency as it is not a trigger and will be captured when BPs change\n  }, [mdOrAbove, lgOrAbove]);\n\n  // Generate the tab items based on props and viewport conditions\n  const tabItems: TabsProps['tabs'] = useMemo(() => {\n    const summaryTab = { id: summaryTabId, name: 'Summary' };\n    if (mdOrAbove) {\n      return !summaryExpanded || (persistentUtility && !xlOrAbove)\n        ? [summaryTab, ...tabItemsProp]\n        : tabItemsProp;\n    }\n    const utilityTabs = [];\n    if (utilities) utilityTabs.push({ id: utilitiesTabId, name: 'Utilities' });\n    if (persistentUtility && !mdOrAbove) {\n      utilityTabs.push({ id: persistentUtilityTabId, name: persistentUtility.title });\n    }\n\n    return [summaryTab, ...tabItemsProp, ...utilityTabs];\n  }, [\n    mdOrAbove,\n    xlOrAbove,\n    summaryTabId,\n    utilitiesTabId,\n    persistentUtilityTabId,\n    utilities,\n    persistentUtility,\n    tabItemsProp,\n    summaryExpanded\n  ]);\n\n  // Setup tab content\n  const tabContent = useMemo(() => {\n    const summaryTabContent = { id: summaryTabId, content: <Card>{summary}</Card> };\n\n    if (mdOrAbove) {\n      return !summaryExpanded || (persistentUtility && !xlOrAbove)\n        ? [summaryTabContent, ...tabContentProp]\n        : tabContentProp;\n    }\n\n    const utilityTabs = [];\n\n    if (utilities) {\n      utilityTabs.push({\n        id: utilitiesTabId,\n        content: <Flex container={{ direction: 'column', gap: 2 }}>{utilities}</Flex>\n      });\n    }\n\n    if (persistentUtility) {\n      utilityTabs.push({ id: persistentUtilityTabId, content: persistentUtility?.content });\n    }\n\n    return [summaryTabContent, ...tabContentProp, ...utilityTabs];\n  }, [\n    summaryTabId,\n    summary,\n    mdOrAbove,\n    summaryExpanded,\n    persistentUtility,\n    xlOrAbove,\n    tabContentProp,\n    utilities,\n    utilitiesTabId,\n    persistentUtilityTabId\n  ]);\n\n  // Grid layout props\n  let caseViewGridContainer = {\n    cols: 'minmax(0, 1fr)',\n    colGap: 0,\n    rows: 'minmax(0, max-content) auto',\n    areas: `\n      \"summary\"\n      \"work-area\"\n    `\n  };\n\n  const sharedGridProps = {\n    colGap: 2,\n    rows: caseViewGridContainer.rows\n  };\n\n  if (persistentUtility) {\n    if (xlOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, max-content) minmax(0, 1fr) repeat(2, minmax(0, max-content))',\n        areas: '\"summary work-area persistentUtility utilities\"'\n      };\n    } else if (mdOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, 1fr) repeat(2, minmax(0, max-content))',\n        areas: `\n          \"summary summary summary\"\n          \"work-area persistentUtility utilities\"\n        `\n      };\n    }\n  } else if (summaryExpanded) {\n    if (mdOrAbove) {\n      caseViewGridContainer = {\n        ...sharedGridProps,\n        cols: 'minmax(0, max-content) minmax(0, 1fr) minmax(0, max-content)',\n        areas: '\"summary work-area utilities\"'\n      };\n    }\n  } else if (mdOrAbove) {\n    caseViewGridContainer = {\n      ...sharedGridProps,\n      cols: 'minmax(0, 1fr) minmax(0, max-content)',\n      areas: `\n            \"summary summary\"\n            \"work-area utilities\"\n          `\n    };\n  }\n\n  // Apply sticky columns\n  const scrollStickOptions = useRef<ScrollStickOptions & { elements: HTMLElement[] }>({\n    elements: []\n  });\n\n  const stickOffset = useMemo(() => {\n    if (windowIsAvailable && caseViewRef.current) {\n      return parseFloat(\n        window.getComputedStyle(caseViewRef.current).getPropertyValue('--appshell-offset')\n      );\n    }\n\n    return 0;\n  }, [caseViewRef.current]);\n\n  useScrollStick(\n    // isMediumOrAbove means side by side columns | | |\n    mdOrAbove ? { ...scrollStickOptions.current, offset: stickOffset } : undefined\n  );\n\n  useEffect(() => {\n    if (\n      mdOrAbove &&\n      summaryExpanded &&\n      !persistentUtility &&\n      (currentTabId === summaryTabId || currentTabId === utilitiesTabId)\n    ) {\n      onTabClick(tabItemsProp[0]?.id);\n    }\n  }, [mdOrAbove, summaryExpanded]);\n\n  useEffect(() => {\n    if (persistentUtility && currentTabId === persistentUtilityTabId) onTabClick(summaryTabId);\n  }, [persistentUtility]);\n\n  // Handles scrolling to tab content for newly clicked tab\n  useEffect(() => {\n    if (!tabContentEl) return;\n    const scrollPos = window.scrollY;\n    const windowHeight = document.documentElement.clientHeight;\n    const bottomPos = scrollPos + windowHeight * 0.8;\n    const tabContentPos = tabContentEl.offsetTop;\n    if (tabContentPos > bottomPos) {\n      const top = tabContentPos - windowHeight * 0.2;\n      window.scrollTo({ top, behavior: 'smooth' });\n    }\n  }, [currentTabId]);\n\n  // We need a css variable for the height of the case summary when it is collapsed into a header like layout\n  useLayoutEffect(() => {\n    if (!caseViewRef.current || !summaryRef.current) return;\n\n    caseViewRef.current.style.setProperty(\n      '--summary-height',\n      `${!summaryExpanded ? summaryRef.current.offsetHeight : 0}px`\n    );\n  }, [summaryExpanded]);\n\n  // CaseView context value\n  // Choosing not to memo for now due to extent of deps and how often they change. Optimize as needed.\n  const ctxValue: CaseViewContextValue = {\n    caseId,\n    heading,\n    subheading,\n    caseLink,\n    parentCases,\n    icon,\n    followed,\n    onFollowedChange,\n    actions,\n    promotedActions,\n    onEdit,\n    summary,\n    tabs: {\n      items: tabItems,\n      onClick: onTabClick,\n      currentTabId\n    },\n    persistentUtility,\n    intelligentGuidance,\n    summaryId,\n    summaryExpanded,\n    utilitiesExpanded,\n    onToggleSummary,\n    isPreview,\n    aboveMD: mdOrAbove,\n    aboveLG: lgOrAbove,\n    aboveXL: xlOrAbove\n  };\n\n  // Here we go...\n  return (\n    <>\n      <CaseViewContext.Provider value={ctxValue}>\n        {/* Root element */}\n        <Grid\n          as={StyledCaseView}\n          ref={caseViewRef}\n          container={caseViewGridContainer}\n          item={{ area: 'case-view' }}\n          {...restProps}\n        >\n          {/* Summary */}\n          <Grid\n            // Used for aria-controls on the toggle button\n            id={summaryId}\n            as={StyledSummary}\n            item={{ area: 'summary' }}\n            desktop={mdOrAbove && (!persistentUtility || xlOrAbove) && !summaryExpanded}\n            isLargeOrAbove={lgOrAbove}\n            ref={summaryRef}\n          >\n            <CaseSummary />\n          </Grid>\n\n          {/* Work area */}\n          <Flex\n            container={{\n              direction: 'column',\n              alignContent: 'start',\n              rowGap: 2\n            }}\n            as={StyledWorkArea}\n            persistentUtility={Boolean(persistentUtility)}\n          >\n            {banners && <div>{banners}</div>}\n            {stages && <div>{stages}</div>}\n            {tasks && <div>{tasks}</div>}\n\n            {(!mdOrAbove || (persistentUtility && !xlOrAbove) || !summaryExpanded) && (\n              <Tabs tabs={tabItems} onTabClick={onTabClick} currentTabId={currentTabId} />\n            )}\n\n            <div ref={setTabContentEl}>\n              {tabContent?.map(({ id, content }) => (\n                <TabPanel currentTabId={currentTabId} tabId={id} key={id}>\n                  {content}\n                </TabPanel>\n              ))}\n            </div>\n          </Flex>\n\n          {/* Persistent utility column */}\n          {persistentUtility && mdOrAbove && (\n            <Grid as={StyledPersistentUtility} item={{ area: 'persistentUtility' }}>\n              {persistentUtility.content}\n            </Grid>\n          )}\n\n          {/* Utility drawer */}\n          {utilities && mdOrAbove && !lgOrAbove && utilitiesExpanded && (\n            <Drawer\n              as={StyledCaseDrawer}\n              open={utilitiesExpanded}\n              position='fixed'\n              placement={direction.end}\n              shadow\n              nullWhenClosed\n              hasPersistentUtility={!!persistentUtility}\n            >\n              <Flex\n                as={StyledCaseDrawerContent}\n                container={{ direction: 'column', gap: 2 }}\n                id={utilitiesDrawerId}\n              >\n                <Flex container={{ justify: 'end' }}>\n                  <Button\n                    aria-expanded={utilitiesExpanded ? 'true' : 'false'}\n                    aria-controls={utilitiesDrawerId}\n                    variant='simple'\n                    icon\n                    onClick={onToggleUtilities}\n                    as={StyledUtilToggle}\n                    label={t('collapse_utilities_panel')}\n                  >\n                    <Icon name={`move-${direction.end}-solid`} />\n                  </Button>\n                </Flex>\n                {utilities}\n              </Flex>\n            </Drawer>\n          )}\n\n          {/* Utilities */}\n          {utilities && mdOrAbove && (\n            <Grid\n              ref={(el: HTMLDivElement) => {\n                if (el) (scrollStickOptions.current?.elements).push(el);\n              }}\n              as={StyledUtilities}\n              container={{\n                cols: 'minmax(0, 1fr)',\n                rowGap: 2,\n                pad: [2, 0, 2]\n              }}\n              item={{\n                area: 'utilities'\n              }}\n            >\n              <Flex container={{ justify: utilitiesExpanded ? 'end' : 'center' }}>\n                <Button\n                  aria-expanded={utilitiesExpanded ? 'true' : 'false'}\n                  aria-controls={lgOrAbove ? utilitiesId : utilitiesDrawerId}\n                  variant='simple'\n                  icon\n                  onClick={() => {\n                    if (!obeyUtilitiesExpandedProp && utilitiesExpandedProp) {\n                      setObeyUtilitiesExpandedProp(true);\n                    } else {\n                      onToggleUtilities?.();\n                    }\n                  }}\n                  as={StyledUtilToggle}\n                  label={t(\n                    utilitiesExpanded ? 'collapse_utilities_panel' : 'expand_utilities_panel'\n                  )}\n                >\n                  <Icon\n                    name={`move-${utilitiesExpanded ? direction.end : direction.start}-solid`}\n                  />\n                </Button>\n              </Flex>\n\n              {lgOrAbove && utilitiesExpanded && (\n                <Flex container={{ direction: 'column', gap: 2 }} id={utilitiesId}>\n                  {utilities}\n                </Flex>\n              )}\n\n              {(!utilitiesExpanded || (mdOrAbove && !lgOrAbove)) && (\n                <UtilitiesSummary\n                  items={utilitiesSummaryItems}\n                  onClick={onToggleUtilities}\n                  aria-expanded={utilitiesExpanded ? 'true' : 'false'}\n                  aria-controls={lgOrAbove ? utilitiesId : utilitiesDrawerId}\n                />\n              )}\n            </Grid>\n          )}\n        </Grid>\n      </CaseViewContext.Provider>\n      {intelligentGuidance}\n    </>\n  );\n};\n\nexport default CaseView;\n"]}