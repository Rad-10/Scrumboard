import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { isValidElement, useCallback, useState } from 'react';
import { ExpandCollapse, Grid, Icon, Status, useBreakpoint, FieldValueList } from '@pega/cosmos-react-core';
import { StyledCard, StyledCardHeader, StyledTimeWrapper, StyledTimelineIcon, StyledCardContent, StyledBulletWrapper, StyledToggleButton, StyledTime } from './Timeline.styles';
import { isFutureDate } from './utils';
const TimelineItem = ({ item: { date, title, icon, status, content }, timeFormat, prevItemDate, nextItemDate, currentTime }) => {
    const [collapsed, setCollapsed] = useState(true);
    const isSmallOrAbove = useBreakpoint('sm');
    const toggleCollapse = useCallback(() => setCollapsed(prevState => !prevState), []);
    return (_jsxs("tr", { children: [isSmallOrAbove && (_jsx(StyledTimeWrapper, { children: _jsx(StyledTime, { variant: timeFormat, value: date }) })), _jsx(StyledBulletWrapper, { hasIcon: !!icon, hasPrev: !!prevItemDate, hasNext: !!nextItemDate, isPrevFuture: isFutureDate(prevItemDate, currentTime), isNextFuture: isFutureDate(nextItemDate, currentTime), children: _jsx(StyledTimelineIcon, { container: { inline: true, alignItems: 'center', justify: 'center' }, children: icon && _jsx(Icon, { name: icon }) }) }), _jsxs("td", { style: { width: '100%' }, children: [_jsx("div", { children: _jsx(StyledCard, { children: _jsxs(StyledCardHeader, { container: {
                                    cols: 'auto 1fr',
                                    alignContent: 'evenly',
                                    alignItems: 'center'
                                }, sm: { container: { cols: 'auto 1fr auto' } }, children: [content && (_jsx(StyledToggleButton, { icon: true, variant: 'simple', onClick: toggleCollapse, collapsed: collapsed, "aria-expanded": !collapsed, children: _jsx(Icon, { name: 'caret-down' }) })), _jsxs(Grid, { item: { colStart: '2', colEnd: '2' }, container: { rowGap: 0.25 }, children: [title, !isSmallOrAbove && (_jsxs(Grid, { container: {
                                                    cols: '1fr auto',
                                                    alignContent: 'evenly',
                                                    alignItems: 'center'
                                                }, children: [_jsx(StyledTime, { variant: 'time', value: date }), status && _jsx(Status, { variant: status.variant, children: status.children })] }))] }), isSmallOrAbove && status && (_jsx(Grid, { sm: { item: { colStart: '3', colEnd: '3' } }, children: _jsx(Status, { variant: status.variant, children: status.children }) }))] }) }) }), content && (_jsx(ExpandCollapse, { dimension: 'height', collapsed: collapsed, nullWhenCollapsed: true, children: _jsx(StyledCardContent, { children: isValidElement(content) ? (content) : (_jsx(FieldValueList, { fields: content, variant: isSmallOrAbove ? 'inline' : 'stacked' })) }) }))] })] }));
};
export default TimelineItem;
//# sourceMappingURL=TimelineItem.js.map